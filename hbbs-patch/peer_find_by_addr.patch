// Patch for peer.rs - add method to find device ID by socket address

// Add this method to PeerMap impl block (after is_in_memory method):

    // Find device ID by socket address
    pub(crate) async fn get_id_by_addr(&self, addr: SocketAddr) -> Option<String> {
        let map = self.map.read().await;
        for (id, peer) in map.iter() {
            let peer_addr = peer.read().await.socket_addr;
            if peer_addr == addr {
                return Some(id.clone());
            }
        }
        None
    }
